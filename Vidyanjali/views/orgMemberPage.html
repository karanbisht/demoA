<div data-role="view" id="groupMemberShow" data-id="innerActivity" data-layout="innerPages"  class="actScrollView"  data-model="app.groupDetail" data-show ="app.groupDetail.orgMemberShow" data-use-native-scrolling="true">
    <div data-role="header">
        <div data-role="navbar">
            Organization Members
            <a style="background:transparent; border:none;" data-icon="camera" data-align="left" data-role="button" data-click="app.groupDetail.backToOrgDetail"></a>
            <a style="background:transparent; border:none;" data-icon="printer" data-align="right" data-role="button" data-click="app.callAdminOrganisationList"></a>
        </div>
    </div>
    <div>
        <div class="loader" id="progressAdminOrgMem" style="display:block;">
            <div class="ball"></div>
        </div>

        <span id="groupMember-listview" data-style="inset" data-role="listview" data-template="groupMemberTemplate" data-bind="source: activities"></span>
    </div>
    <!--<div data-role="footer">
        <div id="orgAddMemberTabStrip" data-role="tabstrip" data-selected-index="2">
            <a id="" data-icon="add" data-role="button" data-bind="click: addMemberToGroup" >Add Members</a>
            <a id="adminRemoveMember" data-icon="trash" data-role="button" data-bind="click: removeMemberFromGroup" >Remove Members</a>
        </div>
    </div>-->
    
   <div id="orgMemFooter" data-role="footer" style="padding-bottom:10px;background:#ffffff">
                <ol class="reg-group-wrp" style="margin-top:10px">
                    <li style="width:100%">
                        <span id="adminAddMember" class="clickEffect" data-role="touch" data-bind="events: { tap: addMemberToGroup }" style="float:left;margin;width:46%;padding-top:10px;height:40px;background-color:#7FBF4D;color:#ffffff;border-radius:3px;" > Add Members </span>
                        <span id="adminRemoveMember" class="clickEffect" data-role="touch" data-bind="events: { tap: removeMemberFromGroup }"  style="float:right;height:40px;padding-top:10px;width:46%;background-color:#303645;color:#ffffff;border-radius:3px;" >Remove Members</span>
                    </li>
                </ol>
   </div>
</div>

<div data-role="view" id="removeMemberFromGroup" data-id="innerActivity" data-layout="innerPages" class="activities-view" data-model="app.groupDetail"  data-show="app.groupDetail.showGroupToDelete" data-use-native-scrolling="true">
    <div data-role="header">
        <div data-role="navbar">
            Delete Members
            <a style="background:transparent; border:none;" data-icon="camera" data-align="left" data-role="backbutton"></a>
            <!--<a style="background:transparent; border:none;" data-icon="delete" data-align="right" data-role="button" data-click="app.groupDetail.removeMemberClick"></a>-->
            <a style="width: 3.5em;height:3em;margin-top:2px; border: 0 none;  background-position: 0 50%;background-color: transparent;" data-align="right" data-role="button" data-click="app.groupDetail.removeMemberClick"><img src="styles/images/delete.png" style="background-position: .65em 50%;width:100%;height:90%"/></a>
        </div>
    </div>

    <div class="loader" id="deleteMemberLoader" style="display:none;">
        <div class="ball"></div>
    </div>
    
    <!--<div id="example">
        <div id="deleteMemberData" style="border:none;padding:10px;" data-template="Member-Delete-template"></div>
    </div>-->
    
     <ul  id="deleteMemberData" class="ulClassCheck" data-role="listview" data-bind="source: groupDetail" style="border:none;"></ul>

    <!--<li class="defineSaveButton" data-role="touch" data-bind="events: { tap: removeMemberClick}">
        Delete
    </li>-->
</div>

<script type="text/x-kendo-template" id="groupMemberTemplate">
    #if(orgID!=='0'){#
    <div class="cf-clickEffect" data-role="touch" data-bind="events: { tap: clickOnOrgMember }">
        #if(photo!==""){#
            <img src=${photo} class="user-avatar-img" onerror="this.onerror=null;this.src='styles/images/avatar1.png';"/>
        #}else{#
            <div class="user-avatar-img-show"></div>
        #}#

        <div class="activity-content" >
            <h2 id="" class="person-name">${first_name} ${last_name}</h2>
            <a id="activityTemplateMessage" class="user-share-txt">${mobile}</a>
        </div>
    </div>
   #}else{#
         <div class="cf">
            <div class="user-avatar-img-show"></div>
            <div class="no-activity-content">
                <a id="activityTemplateMessage" class="user-share-txt">${email}</a>
            </div>
         </div>        
        #}#
</script>


<!--<script  type="text/x-kendo-template" id="Member-Delete-template">
    <div class="deleteGroupShow">
        <label >
            <input type="checkbox" class="largerCheckbox" value="${customerID}" />${first_name} ${last_name}
        </label>
    </div>
</script>-->


  <script type="text/x-kendo-template" id="Member-Delete-template"> 
    #$(".ulClassCheck").removeClass("km-list");#        
     #if(orgID!=='0'){#  
        <div class="deleteGroupShow">
            <label>
                <input type="checkbox" class="largerCheckbox" value="${customerID}" data-bind="checked:check"/> #:first_name#  #:last_name#
            </label>
        </div> 
   #}else{#    
       <div class="cf" style="margin:10px;">
            <div class="user-avatar-img-show"></div>
                <div class="no-activity-content">
                    <a id="activityTemplateMessage" class="user-share-txt">${email}</a>
                </div>        
       </div>        
   #}#
  </script>


<div data-role="view" id="editMemberInAdmin" data-layout="default" class="activities-view" data-model="app.groupDetail"
     data-show="app.groupDetail.editMemberShow" data-use-native-scrolling="true">
   <div data-role="header">
        <div data-role="navbar">
            Edit Member
            <a style="background:transparent; border:none;" data-icon="camera" data-align="left" data-role="backbutton"></a>
            <a style="background:transparent; border:none;" data-icon="printer" data-align="right" data-role="button" data-click="app.callUserLogin"></a>
        </div>
   </div>
   <div class="loader" id="adminEditCustomer" style="display:none;">
        <div class="ball"></div>
   </div>
    
   <div id="editOrgMemberContent">
        <div style="vertical-align:middle; text-align:center;border:none;margin-top:10px;">
                        <a style="background:transparent; border:none;" data-role="button" data-rel="actionsheet" data-align="center" href="#adminMemberprofilePicUpload">
                            <img id="editMemberPhoto" src="" height="100" width="100" style="border-radius:3px;background-size: cover;background-position: center center; background-repeat: no-repeat;"/>
                        </a>
        </div>
        <form>
            <ul data-role="listview" data-style="inset">
                <li class="username">
                    <input type="text" id="editFirstNameAdmin" placeholder="First Name" />
                </li>
                <li class="password">
                    <input type="text"  id="editLastNameAdmin" placeholder="Last Name" />
                </li>
                <li class="password">
                    <input type="email" id="editEmailAdmin" placeholder="Email" />
                </li>
                <li class="password">
                    <input type="number" pattern="[0-9]*" step="0.01" id="staticMobile" placeholder="Mobile Number"/>
                </li>
            </ul>
            <a style="padding-left:10px;color:#7FBF4D;" data-role="touch" data-bind="events: { tap: addMoreMobileNoPage }">Add More Number</a>
            <div id="showAlternateList" style="padding-left:10px;padding-top:10px;">Alternate Number
                    <ul  id="alternateMobileList" data-role="listview" data-style="inset"></ul>
            </div>
        </form>        
        <label style="margin:10px;color:rgb(127,191,77);">
              <span>Member Added to Group</span>
              <select id="groupInEditMember"  multiple style="margin-left:10px;width:94.5%;"></select>
        </label>
        <ul data-role="actionsheet" id="adminMemberprofilePicUpload">
                    <li class="km-actionsheet-title"></li>
                    <li>
                        <a href="#" data-role="button" data-bind="click: takeMemberProfilePhoto">Take Photo</a>
                    </li>
                    <li>
                        <a href="#" data-role="button" data-bind="click: selectMemberProfilePhoto">Album</a>
                    </li>
                    <!--<li>
                        <a href="#" data-role="button" data-bind="click: resetMemberProfilePhoto">Reset</a>
                    </li>-->
        </ul>
        <li id="registrationNextR" class="defineSaveButton" data-role="touch" data-bind="events: { tap: editProfileFunc }">
            Save
        </li>
   </div>
     
</div>

<script>
    function removeAlternateNo(num){
        var li_Count = num+1;        
        var arrayval = JSON.parse(localStorage["ALTER_ARRAY"]);
        console.log(arrayval);       
        
        var orgId = arrayval[num].org_id;
        var custNo = arrayval[num].customerId;
        var alterId = arrayval[num].id;
        
        console.log(orgId+"/"+custNo+"/"+alterId);

        var dataSourceDeleteAlternateNo = new kendo.data.DataSource({
           
                                                                       transport: {
                        read: {
                                                                                   url: app.serverUrl() + "customer/removeAlternate/"+orgId+"/"+custNo+"/"+alterId,
                                                                                   type:"POST",
                                                                                   dataType: "json" // "jsonp" is required for cross-domain requests; use "json" for same-domain requests
                                                                               }
                             },
                                                                       schema: {
                        data: function(data) {
                            console.log(data);
                            return [data];
                        }
                    },
                                                                       error: function (e) {
                                                                           console.log(e);
                                                                           
                                                                           app.analyticsService.viewModel.trackException(e, 'Api Call , Unable to get response from API fetching Organization Member in Admin Panel'+JSON.stringify(e));
                                                                           
                                                                           navigator.notification.alert("Please check your internet connection.",
                                                                                                        function () {
                                                                            }, "Notification", 'OK');
                                                                       }               
                                                                   });  
             
                dataSourceDeleteAlternateNo.fetch(function() {
                    console.log("----------------------------------");
                    var loginDataView = dataSourceDeleteAlternateNo.data();
                    console.log(loginDataView);       
                    $.each(loginDataView, function(i, loginData) {
                        console.log(loginData.status[0].Msg);
                               
                        if (loginData.status[0].Msg==='Success') {
                            $("#editMobileLi"+li_Count).empty();
                            $("#editMobileLi"+li_Count).css("border","none");
                            
                              if (!app.checkSimulator()) {
                                     window.plugins.toast.showShortBottom('Alternate Number Removed Successfully.');
                              }else {
                                     app.showAlert("Alternate Number Removed Successfully.", "Notification"); 
                              }                            
                        }else {
                            app.showAlert(loginData.status[0].Msg , 'Notification'); 
                        }
                    });
                });
            }
</script>

<div data-role="view" id="addAlternateNumber" data-layout="default" class="activities-view" data-model="app.groupDetail"
     data-show="app.groupDetail.addAlternateNo">

    <div data-role="header">
        <div data-role="navbar">
            Add Alternate Number
            <a style="background:transparent; border:none;" data-icon="camera" data-align="left" data-role="backbutton"></a>
            <a style="background:transparent; border:none;" data-icon="printer" data-align="right" data-role="button" data-click="app.callUserLogin"></a>
        </div>
    </div>

    <div>
        <form>
            <ul data-role="listview" data-style="inset">
                <li class="password" style="border-bottom:1px solid #eaeced;">
                    <input type="number" pattern="[0-9]*" step="0.01" id="editMobileAlterPage" placeholder="Mobile Number"/>
                </li>                
            </ul>
            <ul  id="alternateMobile" data-role="listview" data-style="inset"></ul>
            <a style="padding-left:10px;margin-top:-10px;color:#5992CB" data-role="touch" data-bind="events: { tap: addMoreMobileNoFunc }">Add More</a>
        </form>
    </div>
    
    <li id="registrationNextR" class="defineSaveButton" data-role="touch" data-bind="events: { tap: editProfileFunc }">
        Save
    </li>
    
</div>


       