<div data-role="view" data-layout="default" class="activities-view" data-model="app.registration">
    <div data-role="header">
        <div data-role="navbar">
            Registration
            <a class="nav-button nav-button-back hide-text" data-align="left" data-role="backbutton" href="views/registrationView.html">Back</a>
            <a class="nav-button nav-button-add hide-text" data-align="right" data-role="button" data-bind="click: clearSelectOrganisation">Add</a>
        </div>
    </div>
 
    <div>
        <ul class="outerSelect">
  		<li class="parentView">
              <img src="styles/images/habicon.png" height="42" width="42"  style="margin-left:-25px ;">
                   <!-- <select data-role="dropdownlist" data-bind="source: organisationData, value: organisationInit" data-text-field="name"  data-value-field="value" ></select> -->
              <input id="selectOrgData" />
 		 </li>
                  
          <li class="parentView">  
               <img src="styles/images/group.png" height="42" width="42" style="margin-left:-25px ;">
                   <!--<select data-role="dropdownlist" data-bind="source: groupData, value: groupInit" data-text-field="name"  data-value-field="value" ></select>-->
                 <input id="selectGroupData" />
          </li>
        </ul>   
     </div>               
    
    <ol class="reg-group-wrp">
                <li>
                    <span id="login" data-role="touch" style="float:right;margin-left:10px;" data-bind="events: { tap: regDone }">
                        <a data-role="button" style="background-color:#33539E">Done</a>
                    </span>
                </li>
    </ol>
    
    
    
    <script type="text/javascript">

      $(document).ready(function() {
          
          
                    // create ComboBox from input HTML element
                /*    $("#selectOrgData").kendoComboBox({
                        dataTextField: "text",
                        dataValueField: "value",
                        dataSource: [
                            { text: "Sakshay", value: "Sakshay" },
                            { text: "Infosys", value: "Infosys" },
                            { text: "TCS", value: "TCS" },
                            { text: "Wipro", value: "Wipro" }
                        ],
                        filter: "contains",
                        suggest: true
                        //index: 0
                    });*/
					
          
          var organisationDS = new kendo.data.DataSource({
            transport: {
                type: "json",
        		serverFiltering: true,
                read: {
                    url: "http://54.85.208.215/webservice/organisation/getOrg",  //Note the URL path!
                    dataType: "json",
                    type: 'POST'
                }
            },
            schema: {
                model: {
                    fields: {
                        pid: { type: "number" },
                        org_name: { type: "string" }
                    }
                }
              }
       	 });

        $("#selectOrgData").kendoComboBox({
            placeholder: "Select Organisation",
            dataTextField: "org_name",
            dataValueField: "pid",
            dataSource: organisationDS,
            change: onChangeOrganisation
        });         
          
           $("#selectGroupData").kendoComboBox({
            placeholder: "Select Group"
           });
                
          /*
                   $("#selectGroupData").kendoComboBox({
                        dataTextField: "text",
                        dataValueField: "value",
                        dataSource: [
                            { text: "Developer", value: "Developer" },
                            { text: "Sales", value: "Sales" },
                            { text: "Testing", value: "Testing" },
                            { text: "R&D", value: "R&D" }
                        ],
                        filter: "contains",
                        suggest: true
                        //index: 0
                    });
          
          */
          
           var onChangeOrganisation = function(){
             console.log("hello");
       		  var selectData = $("#selectGroupData").data("kendoComboBox");    
           	  var orgSelected = selectData.value();
    		            
             
             var groupDS = new kendo.data.DataSource({
            transport: {
                type: "json",
        		serverFiltering: true,
                read: {
                    url: "http://54.85.208.215/webservice/group/getGroupByOrgID/"+orgSelected,  //Note the URL path!
                    dataType: "json",
                    type: 'POST'
                }
            },
            schema: {
                model: {
                    fields: {
                        pid: { type: "number" },
                        group_name: { type: "string" }
                    }
                }
              }
       	 });

        $("#selectGroupData").kendoComboBox({
            placeholder: "Select Group",
            dataTextField: "group_name",
            dataValueField: "pid",
            dataSource: groupDS
        });
                   
             };

          });
    
    /*var selectOrgModel = kendo.observable({      
         
        organisationData: [{ name: "Sakshay", value: "Sakshay"}, { name: "Infosys", value: "Infosys"}, { name: "TCS", value: "TCS" }],
        
        groupData :[{name:"IT" , value:"IT"} , {name:"Government" , value:"Government" }, {name:"Sales",value="Sales" },{name="Developer",value="Developer"}],
        
        
        organisationInit="Select Organisation",
        
        groupInit="Select Group"
        });
            kendo.bind($('#selectOrg'), selectOrgModel, kendo.mobile.ui);
    */


	</script>
    
</div>


